/*globals jQuery,Modernizr *//*!	
* Headstick.js V 0.1
*
* Copyright 2013, Uli SCh√∂berl http://aplusplus.org
* Released under the WTFPL license 
* http://sam.zoy.org/wtfpl/
*
* Date: 19.04.2013

// Usage
if(!Modernizr.touch) {
  $('.post .caption').headstick()
}

*/(function(e){e.fn.headstick=function(t){function r(){viewportOffset=e(document).scrollTop();viewportHeight=e(window).height();if(viewportOffset<=0)return;e(presentationEngine.slides).each(function(){var t=e(this);offset=t.offset().top;height=t.height();$fixedElement=t.children("hgroup");fixedElementHeight=$fixedElement.outerHeight();posPoint=offset+height-fixedElementHeight;if(viewportOffset>=offset&&viewportOffset<offset+height){presentationEngine.onSlideInView(t);if(posPoint>viewportOffset){$fixedElement.css("top","").css("bottom","").css("position","fixed");$fixedElement.css({top:"",bottom:"",position:"fixed"})}else $fixedElement.css({top:"auto",bottom:"0px",position:"absolute"});if(t.data("pe.sqln")){var n=viewportOffset-offset,r=n/(height-viewportHeight),i=t.data("pe.sqln")-1;W.log(t.attr("id"),i,r,Math.round(i*r));e(".sq-el",t).removeClass("active").eq(Math.round(i*r)).addClass("active")}}else{offset<viewportOffset?$fixedElement.css({top:"auto",bottom:"0px",position:"absolute"}):$fixedElement.css({top:"",bottom:"",position:""});presentationEngine.onSlideOutofView(t)}})}var n=e.extend({parent:"auto",onStick:"headstick.stick",onUnstick:"headstick.unstick"},t);return this.each(function(){var t=e(this);e(window).on("resize",resizer)})}})(jQuery);